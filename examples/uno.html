<html lang="es">
<head>
    <link rel="stylesheet" type="text/css" href="vendor/css/c3.css">
    <link rel="stylesheet" type="text/css" href="vendor/css/ajustes_c3.css">
    <link rel="stylesheet" type="text/css" href="vendor/css/iconos.css">

    <meta charset="utf-8">
    <script src="https://cdn.firebase.com/js/client/2.2.8/firebase.js"></script>
    <!-- Latest compiled and minified CSS -->
    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">-->

    <!-- Optional theme -->
    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">-->

    <!-- Latest compiled and minified JavaScript -->
    <!--<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>-->
</head>
<body>
<div id="my-c3-chart" class="text-center col-md-12" style=" width: 95%">
    <h1>Gr&aacute;fica Financiera</h1>

    <div id="chart-header"></div>
    <div id="chart"></div>
    <div id="chart2"></div>
    <div id="chart3"></div>
</div>

<script>
    var locale = "es";
    var formato = '%Y-%m-%d';
    var total_datos = 50;

    //Periodos
    var periodos = [
        {
            texto: "1d",
            cantidad: 1,
            tipo: "dia",
            seleccionado: false
        }, {
            texto: "5d",
            cantidad: 5,
            tipo: "dia",
            seleccionado: false
        }, {
            texto: "1m",
            cantidad: 1,
            tipo: "mes",
            seleccionado: true
        },
        {
            texto: "3m",
            cantidad: 3,
            tipo: "mes",
            seleccionado: false
        },
        {
            texto: "6m",
            cantidad: 6,
            tipo: "mes",
            seleccionado: false
        },
        {
            texto: "YTD",
            cantidad: 0,
            tipo: "hasta_la_fecha",
            seleccionado: false
        },
        {
            texto: "1y",
            cantidad: 1,
            tipo: "anno",
            seleccionado: false
        },
        {
            texto: "2y",
            cantidad: 2,
            tipo: "anno",
            seleccionado: false
        },
        {
            texto: "5y",
            cantidad: 5,
            tipo: "anno",
            seleccionado: false
        }
    ];

    //Datos para la grafica de linea
    var datos = {
        x: 'x',
        columns: [],
        type: 'line' // especifico que es de linea
    };

    //Datos para la grafica del volumen
    var datos_volumen = {
        x: 'x',
        columns: [],
        type: 'bar' // grafica una grafica de barra
    };

    //Datos para la grafica de area
    var datos_area = {
        x: 'x',
        columns: [],
        type: 'area' // especifica que es de area
    };

</script>

<script src="vendor/d3.v3.min.js" charset="utf-8"></script>
<script src="vendor/c3.js"></script>
<script src="../build/c3haikus.js"></script>
<!--<script src="../build/c3haikus.min.js"></script>-->
<script src="uno.js"></script>

<script src="html2canvas.js"></script>
<script src="html2canvas.svg.js"></script>
<script >
    var results = [];
    console.log("funciona");
    var myFirebaseRef = new Firebase("https://yoi2.firebaseio.com/");
    console.log(myFirebaseRef);
    myFirebaseRef.child("precios_intradia/MAXCOMCPO/Historico").on("value", function(snapshot) {
        console.log(snapshot.val())
        results = snapshot.val();
        var fechas = ["x"];
        var maxcom = ["MAXCOM"];
        var ipc = ["IPC"];
        var yahoo = ["YAHOO"];
        var volume_maxcom = ["MAXCOM"];
        for(var i=0;i<results.length;i++){
            fechas.splice(1,0,results[i].date)
            maxcom.splice(1,0,results[i].price)
            ipc.splice(1,0,results[i].price)
            yahoo.splice(1,0,results[i].price)
            volume_maxcom.splice(1,0,results[i].volume)
        }
        datos.columns = [fechas, maxcom, ipc, yahoo];
        datos_volumen.columns = [fechas, volume_maxcom];
        datos_area.columns = [fechas, maxcom];

        datos.onmouseover = function (d) {
            showTooltip(1, d3.event, d)
        }

        //Cuando se mueve el mouse por la grafica de volumen
        datos_volumen.onmouseover = function (d) {
            showTooltip(0, d3.event, d)
        }
        //var data2 = datos_aleatorios(10);
        //console.log(data2);
          // Alerts "San Francisco"
        InitData();
        win_resize();
        mostrar_periodo_seleccionado();
        console.log("SETEADO");

    });
</script>
</body>
</html>
