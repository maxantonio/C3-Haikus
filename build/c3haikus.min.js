/*! c3haikus 2015-05-05 */
!function(a){"use strict";function b(a){a=a||{},this.phrases={},this.extend(a.phrases||{}),this.currentLocale=a.locale||"en",this.allowMissing=!!a.allowMissing,this.warn=a.warn||i}function c(a){var b,c,d,e={};for(b in a)if(a.hasOwnProperty(b)){c=a[b];for(d in c)e[c[d]]=b}return e}function d(a){var b=/^\s+|\s+$/g;return a.replace(b,"")}function e(a,b,c){var e,f,h;return null!=c&&a?(f=a.split(k),h=f[g(b,c)]||f[0],e=d(h)):e=a,e}function f(a){var b=c(m);return b[a]||b.en}function g(a,b){return l[f(a)](b)}function h(a,b){for(var c in b)"_"!==c&&b.hasOwnProperty(c)&&(a=a.replace(new RegExp("%\\{"+c+"\\}","g"),b[c]));return a}function i(b){a.console&&a.console.warn&&a.console.warn("WARNING: "+b)}function j(a){var b={};for(var c in a)b[c]=a[c];return b}b.VERSION="0.4.2",b.prototype.locale=function(a){return a&&(this.currentLocale=a),this.currentLocale},b.prototype.extend=function(a,b){var c;for(var d in a)a.hasOwnProperty(d)&&(c=a[d],b&&(d=b+"."+d),"object"==typeof c?this.extend(c,d):this.phrases[d]=c)},b.prototype.clear=function(){this.phrases={}},b.prototype.replace=function(a){this.clear(),this.extend(a)},b.prototype.t=function(a,b){var c,d;return b=null==b?{}:b,"number"==typeof b&&(b={smart_count:b}),"string"==typeof this.phrases[a]?c=this.phrases[a]:"string"==typeof b._?c=b._:this.allowMissing?c=a:(this.warn('Missing translation for key: "'+a+'"'),d=a),"string"==typeof c&&(b=j(b),d=e(c,this.currentLocale,b.smart_count),d=h(d,b)),d};var k="||||",l={chinese:function(a){return 0},german:function(a){return 1!==a?1:0},french:function(a){return a>1?1:0},russian:function(a){return a%10===1&&a%100!==11?0:a%10>=2&&4>=a%10&&(10>a%100||a%100>=20)?1:2},czech:function(a){return 1===a?0:a>=2&&4>=a?1:2},polish:function(a){return 1===a?0:a%10>=2&&4>=a%10&&(10>a%100||a%100>=20)?1:2},icelandic:function(a){return a%10!==1||a%100===11?1:0}},m={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};"undefined"!=typeof module&&module.exports?module.exports=b:a.Polyglot=b}(this);var i18n=new Polyglot;i18n.locale(locale),i18n.extend({from:"From",to:"To"}),"es"==i18n.locale()&&i18n.extend({from:"Desde",to:"Hasta"});var StockTools=function(a,b){"use strict";function c(){function c(){var a=d3.select(this).attr("data-value"),b=d3.select(this).attr("data-tipo"),c=datos.columns[0].length-1,e=parseDate(datos.columns[0][c]),g=new Date(e.getTime()),h=parseDate(datos.columns[0][1]),i=e;switch(b){case"dia":g.setDate(e.getDate()-a);break;case"mes":g.setMonth(e.getMonth()-a);break;case"anno":g.setYear(e.getFullYear()-a);break;case"hasta_la_fecha":g=new Date(e.getFullYear(),0,1)}if(!f(h,i,g,e))throw new Error("No hay datos para este intervalo");d(g,e),document.getElementById("inicio").value=formatDate(g),document.getElementById("fin").value=formatDate(e)}function d(a,b){chart.axis.min({x:formatDate(a)}),chart.axis.max({x:formatDate(b)})}function e(){var a=parseDate(document.getElementById("inicio").value),b=parseDate(document.getElementById("fin").value);d(a,b)}function f(a,b,c,d){return c>=a&&b>=d}var g=d3.select(a).append("div").attr("class","c3-header"),h=g.append("div").attr("class","c3-periodos").style("float","left"),i=g.append("div").attr("class","c3-intervalos").style("float","left");i.append("span").text(i18n.t("from")),i.append("input").attr("type","text").attr("name","inicio").attr("id","inicio"),i.append("span").text(i18n.t("to")),i.append("input").attr("type","text").attr("name","fin").attr("id","fin");var j=g.append("div").attr("class","c3-botones").style("float","left");j.append("button").attr("id","update").attr("type","button").text("Actualizar").on("click",e),g.append("div").attr("class","c3-clear-header").style("clear","both"),h.selectAll("botones").data(b).enter().append("button").attr("type","button").attr("class",function(a,b){return"button"+b}).attr("data-value",function(a){return a.cantidad}).attr("data-tipo",function(a){return a.tipo}).text(function(a){return a.texto}).on("click",c)}c()};